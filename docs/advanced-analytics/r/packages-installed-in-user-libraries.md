---
title: "ユーザーのライブラリでインストールされている R パッケージでエラーが生じないように |Microsoft ドキュメント"
ms.custom: 
ms.date: 09/29/2017
ms.prod: sql-non-specified
ms.reviewer: 
ms.suite: 
ms.technology:
- r-services
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 99ffd9b8-aa6d-4ac2-9840-4e66d0463978
caps.latest.revision: 2
author: jeannt
ms.author: jeannt
manager: jhubbard
ms.workload: Inactive
ms.translationtype: MT
ms.sourcegitcommit: 29122bdf543e82c1f429cf401b5fe1d8383515fc
ms.openlocfilehash: 0de06ebee16d903b4b00c9d8e4673bf450c485d1
ms.contentlocale: ja-jp
ms.lasthandoff: 10/10/2017

---
# <a name="avoiding-errors-on-r-packages-installed-in-user-libraries"></a>ユーザーのライブラリでインストールされている R パッケージのエラーを回避します。

既定のライブラリがブロックされているか利用できないときに、ライブラリではユーザー、R パッケージをインストールするのには、経験豊富な R ユーザーが慣れています。 ただし、SQL Server では、この方法はサポートされていないと、ユーザー ライブラリへのインストールは通常、「パッケージが見つかりません」エラーで終了します。

このトピックでは、このエラーを回避するための回避策を提供します。 R コードを変更する方法について説明し、SQL Server インスタンスから R パッケージを使用するため、R パッケージのインストール処理が正しいを提案します。

## <a name="why-r-user-libraries-cannot-be-accessed-from-sql-server"></a>R ユーザーのライブラリを SQL Server からアクセスできない理由

新しい R パッケージをインストールする必要がある R 開発者は、日常的には、パッケージをインストールして、既定のライブラリが使用できないときに、または開発者が、コンピューターの管理者でない場合に、プライベート ユーザー ライブラリを使用しています。

たとえば、一般的な R 開発環境でユーザーを追加したパッケージの場所、R の環境変数に`libPath`、または次のように、完全なパッケージ パスを参照します。

```R
library("c:/Users/<username>/R/win-library/packagename")  
```

ただし、このことができますは機能しません、SQL Server で R ソリューションを実行する場合、インスタンスに関連付けられている特定の既定のライブラリに R パッケージをインストールする必要があるためです。

パッケージが既定のライブラリにインストールされていない場合は、パッケージを呼び出したときに次のエラーが送信されることがあります。

*Library(xxx) でエラー: 'パッケージ名' と呼ばれるパッケージはありません*

不適切な開発ことも、カスタム ユーザー ライブラリに必要な R パッケージをインストールする可能性があるため発生したエラーをソリューションがライブラリの場所にアクセスできない他のユーザーによって実行される場合。

## <a name="how-to-install-r-packages-to-an-accessible-library"></a>アクセス可能なライブラリに R パッケージをインストールする方法

**SQL Server 2016 用**

インスタンスに関連付けられているパッケージ ライブラリを使用します。 詳細については、「 [SQL Server と共にインストールされている R パッケージ](installing-and-managing-r-packages.md)

**SQL server 2017**

SQL Server では、複数のパッケージ バージョンを管理し、ファイル システムへのアクセスをユーザーがあることを必要とせず、個々 のパッケージにユーザーのアクセス許可を付与するための機能を提供します。

パッケージの共有ライブラリを設定し、ユーザー ロールを割り当てる方法の詳細については、次を参照してください。 [for SQL Server の R パッケージの管理](r-package-management-for-sql-server-r-services.md)です。

データベース ロールに基づくパッケージの管理方法を採用する場合、別のユーザー ディレクトリに同じパッケージの複数のコピーをインストールする必要はありません。 認証されたユーザーと共有し、必要とするパッケージの 1 つのコピーをインストールします。 パッケージが、データベース レベルで管理されているために、パッケージとデータベース間の関連するアクセス許可のグループをコピーすることもできます。

## <a name="tips-for-avoiding-package-not-found-errors"></a>「パッケージが見つかりません」エラーを回避するためのヒント

+ ユーザー ライブラリへの依存関係を排除するためのコードを変更します。 実行する R ソリューションを移行するときに[!INCLUDE [ssNoVersion_md](..\..\includes\ssnoversion-md.md)]、次を実行することが重要です。

    + インスタンスに関連付けられている既定のライブラリに必要なすべてのパッケージをインストールします。

    + アドホック ディレクトリまたはユーザーのライブラリからではなく、既定のライブラリからのパッケージが読み込まれていることを確認するためのコードを編集します。

+ ソリューションの一部としてアドホック パッケージのインストールを回避します。 インストールされていないパッケージは、または動的にパッケージをインストールするコードに呼び出しが存在しないかどうかを確認するコードを確認します。 アクセス許可を持っていない場合、コードが失敗し、アクセス許可が、必要がありますパッケージをインストールするとは別に実行する他のコードからです。

+ R パッケージのライブラリへの直接のパスを変更します。 パッケージが既定のライブラリにインストールされていると、R コードで別のライブラリが指定されている場合でも、R ランタイムは既定のライブラリからパッケージを読み込みます。

